(function(q,t,va){function v(a,b){return ba&&ba.dataset[a]||b}function D(a){return function(){var b=arguments.length,c=a[b];if(!c)throw x("No function supplied accepting "+b+" arguments",{functions:a,arguments:Array.from(arguments)});return c.apply(this,arguments)}}function wa(a,b){return a.reduce(function(c,d){var e=b(d);(c[e]||(c[e]=[])).push(d);return c},{})}function xa(a,b){return a.map((c,d)=>[c,b[d]])}function ya(a){for(var b=new Set,c=[],d,e=0;e<a.length;e++)d=a[e],b.has(d)||(b.add(d),c.push(d));
return c}function x(a,b){a=Error(a);a.extra=b;return a}function J(a){var b=null;return function(){return b||(b=a())}}function ca(a){if(a=a&&a.trim())return a.match(/\d+s/)?1E3*parseFloat(a):parseFloat(a)}function da(a){"loading"==t.readyState?t.addEventListener("DOMContentLoaded",a):a()}function u(a,b,c,d){d=d&&d.hasOwnProperty("bubbles")?d.bubbles:!0;d=new CustomEvent(b,{bubbles:d,cancelable:!0,detail:c});console.debug("\ud83d\udece\ufe0f EVENT",b,{el:a,detail:c});a.dispatchEvent(d);return d}function y(a,
b){return 1==a.nodeType&&a.matches(b)?a:a.querySelector(b)}function w(a,b){var c=Array.from(a.querySelectorAll(b));1==a.nodeType&&a.matches(b)&&c.unshift(a);return c}function ea(a){if(a.id)return a.id;var b=a.tagName.toLowerCase();return a.className?b+"."+a.className.replace(" ","."):b}function fa(a,b){var c=[],d=a;do(a=d.getAttribute(b))&&c.push(a);while(d=d.parentElement);return c}function E(a,b){a={selector:a,handler:b};Q.push(a);R&&w(t.body,a.selector).forEach(a.handler)}function F(a){Q.forEach(b=>
{w(a,b.selector).forEach(b.handler)});u(a,"ts-ready")}function za(a,b){var c=new XMLHttpRequest;return{promise:new Promise(function(d,e){b||(b={});c.open(b.method||"GET",a,!0);for(var k in b.headers)c.setRequestHeader(k,b.headers[k]);c.onreadystatechange=function(){if(4==c.readyState&&0!=c.status){var l={"ts-title":c.getResponseHeader("ts-title"),"ts-history":c.getResponseHeader("ts-history"),"ts-swap":c.getResponseHeader("ts-swap"),"ts-swap-push":c.getResponseHeader("ts-swap-push")};return d({ok:200<=
c.status&&299>=c.status,status:c.status,url:c.responseURL,reqUrl:a,xhr:c,opts:b,headers:l,content:c.responseText})}};c.timeout=Aa;c.ontimeout=function(){return e({ok:!1,status:0,url:a,error:"timeout"})};c.send(b.body)}),xhr:c}}function G(a,b,c){if(!b)return a;var d,e;for([d,e]of b)d&&(!c||null!==e&&""!==e?a.append(d,e):a.delete(d));return a}function Ba(a,b){return fa(a,b).reduceRight((c,d)=>{if(""==d)var e=null;else if("{"==d[0])if(d=JSON.parse(d),"object"===typeof d&&null!==d){var k=[];for(e in d)k.push([e,
d[e]]);e=k}else e=void 0;else e=G(new FormData,new URLSearchParams(d));return G(c,e,!0)},new FormData)}function S(a){return a.name&&("submit"!=a.type||a.hasAttribute("ts-clicked"))&&("radio"!=a.type&&"checkbox"!=a.type||a.checked)?a.value:null}function ha(a,b){var c=Ba(a,"ts-data"),d=a.tagName,e;"FORM"==d?(c=G(c,new FormData(a)),d=t.activeElement,"submit"==d.type&&d.name&&d.value&&!c.has(d.name)?c.append(d.name,d.value):"submit"==(null==b?void 0:b.type)&&(a=y(a,"[type=submit]"),a.name&&a.value&&!c.has(a.name)&&
c.append(a.name,a.value))):("INPUT"==d||"SELECT"==d||"TEXTAREA"==d)&&(e=S(a))&&c.append(a.name,e);return c}function K(a){return new Promise(function(b,c){a.onsuccess=function(){b(a.result)};a.onerror=function(){c(a.error)}})}function ia(){if(T)return T;var a=Ca.open("twinspark",1);a.onupgradeneeded=function(){a.result.createObjectStore("twinspark",{keyPath:"url"}).createIndex("time","time")};return T=K(a)}function U(a,b){return a.transaction(a.name,b&&b.write&&"readwrite"||"readonly").objectStore(a.name)}
function Da(a){K(U(a).count()).then(function(b){console.debug("STORED",b);var c=b-Ea;if(0<c){var d=U(a,{write:!0}).index("time").openCursor();d.onsuccess=function(e){if(e=d.result)e.delete(),0<--c&&e.continue()}}})}function ja(){var a={url:B.pathname+B.search,html:t.body.innerHTML,time:+new Date};ia().then(function(b){K(U(b,{write:!0}).put(a)).then(function(){Da(b)})})}function Fa(a,b){ja();history.pushState("history",b,a);u(q,"ts-pushstate",{url:a})}function Ga(a){history.replaceState(null,"",a);
u(q,"ts-replacestate",{detail:a})}function ka(a){if(a.state){var b=B.pathname+B.search;ia().then(function(c){return K(c.transaction(c.name,"readonly").objectStore(c.name).get(b))}).then(function(c){console.debug("onpopstate restore",c.url,c.html.length,c.time);c&&c.html&&(t.body.innerHTML=c.html,("initial"!=a.state||R)&&F(t.body))})}}function z(a,b){if(!a)return a;null==b&&(b=a.getAttribute("ts-target"));return b?b.split("|").map(c=>c.trim()).reduce((c,d,e)=>{e=0<e;if(d&&c&&"target"!=d)if("inherit"==
d){var k=c.parentElement.closest("[ts-target]");k=z(k)}else k="parent "==d.slice(0,7)?c.closest(d.slice(7)):"child "==d.slice(0,6)?c.querySelector(d.slice(6)):"sibling "==d.slice(0,8)?c.parentElement.querySelector(d.slice(8)):e?c.querySelector(d):t.querySelector(d);else k=c;if(!k)throw c=c.outerHTML.match(/<.+?>/)[0],x(`Could not find element with selector ${d} for element ${c}`+(e?" among children":""),{element:c,selector:d});return k},a):a}function la(a,b){for(var c=0;c<ma.length;c++){var d=ma[c];
a.hasAttribute(d)&&a.getAttribute(d)!=b.getAttribute(d)?b.setAttribute(d,a.getAttribute(d)):b.removeAttribute(d)}}function na(a){a.id&&(a.classList.add(Ha),u(a,"ts-enter"))}function Ia(a,b,c){if(a.id){var d=b.querySelector(a.tagName+"[id='"+a.id+"']");if(!d)return na(a);var e=a.cloneNode();la(d,a);c.tasks.push(function(){la(e,d)});return c}}function V(a,b,c,d){a||(a="replace");"morph"!=a&&w(c,"[id]").forEach(function(k){Ia(k,b,d)});var e={ignoreActive:"morph"==a,cb:(k,l)=>{"node-added"==k&&1==l.nodeType&&
(F(l),w(l,"[id]").forEach(na))}};switch(a){case "morph-all":case "morph":oa(b,c,e);break;case "replace":b.replaceWith(c);break;case "inner":b.replaceChildren(c);break;case "prepend":b.prepend(c);break;case "append":b.append(c);break;case "beforebegin":b.parentNode.insertBefore(c,b);break;case "afterend":b.parentNode.insertBefore(c,b.nextSibling);break;case "skip":break;default:throw Error("Unknown swap strategy "+a);}return c}function pa(a,b,c){var d=z(a);if(!d)throw x(`Target element not found for origin ${a.outerHTML.match(/<.+?>/)[0]}`,
{origin:a,replyParent:b});var e;if(e=a.getAttribute("ts-req-selector"))if("children "==e.slice(0,9)){e=y(b,e.slice(9));var k=new DocumentFragment;e&&e.children&&k.append.apply(k,e.children);e=k}else e=y(b,e);else e="BODY"==b.tagName&&"BODY"!=d.tagName?b.children[0]:b;if(!e)throw c=a.getAttribute("ts-req-selector"),x("Cannot find specified html in response, "+`maybe nothing to select as ${c}`,{sel:c,replyParent:b,origin:a});b=a.getAttribute("ts-swap");if(a){k={response:c.response};var l=u(a,"ts-req-after",
k);L(a,l,a.getAttribute("ts-req-after"),k)}return V(b,d,e,c)}function Ja(a,b,c){var d={response:c,tasks:[]},e,k;"skip"!=c.headers["ts-swap"]&&(e=1==a.length?[pa(a[0],b,d)]:xa(a,b.children).map(([l,f])=>pa(l,f,d)));a=w(b,"[ts-swap-push]").map(l=>{try{var f=l.getAttribute("ts-swap-push");!f&&l.id&&(f="#"+l.id);var h=y(t.body,f);if(!h)throw x("cannot find target for server-pushed swap",{reply:l});var g=l.getAttribute("ts-swap");return V(g,h,l,d)}catch(m){console.error(m)}});c.headers["ts-swap-push"]&&
(k=c.headers["ts-swap-push"].split(",").map(l=>{try{var f=l.match(/(\w+):(.+)<=(.+)/);if(!f)throw x("Cannot parse ts-swap-push header value",{header:l});var h=f[1],g=y(t.body,f[2]);if(!g)throw x("cannot find target for header swap",{sel:f[2]});var m=y(b,f[3]);if(!m)throw x("cannot find target for header swap",{reply:m,sel:f[3]});return V(h,g,m,d)}catch(n){console.error(n)}}));e=e.concat(a).concat(k).filter(l=>l);e=ya(e);e.forEach(function(l){for(var f=l.querySelectorAll("script"),h=0;h<f.length;h++){var g=
f[h];if(!(g.type&&"text/javascript"!=g.type||g.dataset.tsNoload)){for(var m=g.parentNode,n=t.createElement(g.nodeName),p=0;p<g.attributes.length;p++){var r=g.attributes[p].name,A=g.getAttribute(r);n.setAttribute(r,A)}n.appendChild(t.createTextNode(g.innerHTML));m.replaceChild(n,g)}}F(l);(l=y(l,"[autofocus]"))&&l.focus()});setTimeout(function(){d.tasks.forEach(function(l){l()})},Ka);return e}function qa(a,b,c,d){var e=(new DOMParser).parseFromString(c,"text/html");e.body.querySelectorAll("noscript").forEach(k=>
k.remove());c=d.headers["ts-title"]||e.title;e=e.body;if(e.children.length<b.length)throw`This request needs at least ${b.length} elements, `+`but ${e.children.length} were returned`;(a=d.headers["ts-history"]||b[0].hasAttribute("ts-req-history")&&a)&&("replace"==b[0].getAttribute("ts-req-history")?Ga(a):Fa(a,c));return Ja(b,e,d)}function La(a){let b,c;var d=ha(a.el,null!=(c=null==(b=a.event.detail)?void 0:b.event)?c:a.event);return{method:a.method,data:d,headers:{Accept:"text/html+partial","TS-URL":B.pathname+
B.search,"TS-Origin":ea(a.el),"TS-Target":ea(z(a.el))}}}function Ma(a,b){if(!b)return a;if(!Array.from(b.entries).every(c=>"string"===typeof c))return a.body=b,a;b=new URLSearchParams(b);a.body=b.toString();a.headers["Content-Type"]="application/x-www-form-urlencoded";return a}function Na(a){if(a.length){var b=a[0].url,c=a[0].method,d=a.reduce(function(g,m){return G(g,m.opts.data)},new FormData),e="GET"==c?(new URLSearchParams(d)).toString():null;d="GET"!=c?d:null;var k={method:c,headers:a.reduce(function(g,
m){m=m.opts.headers;for(var n in m)g[n]?g[n]!=m[n]&&(g[n]+=", "+m[n]):g[n]=m[n];return g},{})};k=Ma(k,d);var l=b;e&&(l+=-1==b.indexOf("?")?"?":"&",l+=e);var f=a.map(function(g){return g.el}),h=za(l,k);f.forEach(function(g){g.setAttribute("aria-busy","true");g.classList.add("ts-active");g["ts-active-xhr"]=h.xhr});return h.promise.then(function(g){M(()=>f.forEach(m=>{m.removeAttribute("aria-busy");m.classList.remove("ts-active");delete m["ts-active-xhr"]}));if(h.xhr.isAborted)return!1;if(g.ok&&g.url&&
g.url!=(new URL(l,B.href)).href)return g.headers["ts-history"]=g.url,qa(g.url,[t.body],g.content,g);if(g.ok)return qa(l,f,g.content,g);N("Something wrong with response",g.content);f.forEach(function(m){u(m,"ts-req-error",C({error:"ts-req-error"},{response:g,url:l,opts:k}))})}).catch(function(g){M(()=>f.forEach(m=>{m.removeAttribute("aria-busy");m.classList.remove("ts-active");delete m["ts-active-xhr"]}));N("Error retrieving backend response",l,g.error||g);f.forEach(function(m){u(m,"ts-req-error",
C({error:"ts-req-error"},{response:g,url:l,opts:k}))})})}}function W(a){return Promise.all(a.map(function(b){b.opts=La(b);var c={req:b},d=u(b.el,"ts-req-before",c);if(d.defaultPrevented)return null;var e=b;(c=L(b.el,d,b.el.getAttribute("ts-req-before"),c))&&(e=c.then(function(l){return d.defaultPrevented?null:b}));c=b.el.getAttribute("ts-req-strategy")||"queue";var k=b.el["ts-active-xhr"];if("first"===c&&k)return null;"last"===c&&k&&(k.abort(),delete b.el["ts-active-xhr"]);return e})).then(function(b){return b.filter(function(c){return!!c})}).then(Na)}
function Oa(){var a=wa(H.reqs,c=>c.method+c.url);H={reqs:[],request:null};for(var b in a)W(a[b])}function X(a,b,c){var d=(c?a.getAttribute("ts-req-batch"):a.getAttribute("ts-req"))||("FORM"==a.tagName?a.getAttribute("action"):a.getAttribute("href")),e=(a.getAttribute("ts-req-method")||("FORM"==a.tagName?a.getAttribute("method")||"POST":"GET")).toUpperCase();return{el:a,opts:{},event:b,url:d,method:e,batch:c}}function Pa(a){a.addEventListener("click",function(b){b.target.focus();a.setAttribute("ts-clicked",
"1");M(function(){a.removeAttribute("ts-clicked")})})}function Y(a,b){var c=a.tagName,d="click";if("FORM"==c)d="submit";else if("INPUT"==c||"SELECT"==c||"TEXTAREA"==c)d="change";"FORM"==c&&"submit"==d&&w(a,'button, input[type="submit"]').forEach(Pa);return a.addEventListener(d,function(e){e.altKey||e.ctrlKey||e.shiftKey||e.metaKey||0!=(e.button||0)||(e.preventDefault(),e.stopPropagation(),b(e))})}function Z(a,b,c){a=q._ts_func&&q._ts_func[a]||I[a]||q[a];if(!a)throw Error("Unknown action command: "+
c.src);return a.apply(c.el,b.concat([c]))}function aa(a){function b(){var r=f.trim();if(r.length){var A=l,O=A.push;var ra=r[0];r='"'==ra||"'"==ra?r.slice(1,r.length-1):r;O.call(A,r)}f=""}function c(){l.length&&(k.push({src:a.slice(h,m).trim(),name:l[0],args:l.slice(1)}),l=[],h=m+1)}function d(){k.length&&(e.push({src:a.slice(g,m).trim(),commands:k}),k=[],g=m+1)}var e=[],k=[],l=[],f="",h=0,g=0,m=0,n=null;for(m=0;m<a.length;m++){var p=a[m];if(n)"\\"==p?(m++,f+=a[m]):p==n?(f+=p,n=null):f+=p;else{if("'"==
p||'"'==p)n=p;else if(" "==p){b();continue}else if(","==p){b();c();continue}else if(";"==p){b();c();d();continue}f+=p}}b();c();d();return e}function Qa(a,b){console.debug("ACTION",a.src,b);var c=C({line:a.src},b);return a.commands.reduce(function(d,e){return d.then(function(k){console.debug(!1!==k?"\ud83d\udd35":"\ud83d\udeab","COMMAND",e.src,{input:k,src:a.src});if(!1===k)return k;void 0!==k&&(c.input=k);c.command=e.name;c.src=e.src;return Z(e.name,e.args,c)}).catch(function(k){throw C(k,{extra:{command:e.src,
action:a.src,element:c.el.outerHTML.match(/<.+?>/)[0]}});})},Promise.resolve(null))}function L(a,b,c,d){if(c){console.debug("ACTIONS",{spec:c,event:b,payload:d});c=aa(c);a=C({el:a,event:b},d);var e;for(b=0;b<c.length;b++)d=c[b],d.commands.length&&(e=Qa(d,a));return e}}function sa(a){var b=a.on,c=a.off,d=a.threshold;return new IntersectionObserver(function(e,k){for(k=0;k<e.length;k++){var l=e[k];l.intersectionRatio>d?u(l.target,b,{entry:l}):l.intersectionRatio<d&&u(l.target,c,{entry:l})}},a)}function ta(a){return a["twinspark-internal"]||
(a["twinspark-internal"]={})}function Ra(a){var b=a.args.indexOf("delay"),c=-1!=a.args.indexOf("changed"),d=-1!=a.args.indexOf("once"),e=-1!=b?ca(a.args[b+1]):null;return function(k,l){function f(){u(k,"ts-trigger",{event:l},{bubbles:!1})}var h=ta(k);if(d){if(h.once)return;h.once=!0}if(c){if(h.value==S(k))return;h.value=S(k)}e?(h.delay&&clearTimeout(h.delay),h.delay=setTimeout(f,e)):f()}}function P(a,b,c,d){function e(k){c(k);ta(a).once&&a.removeEventListener(b,e,d)}a.addEventListener(b,e,d)}function Sa(a,
b){var c=b.name,d=Ra(b);switch(c){case "load":M(function(){d(a,{type:"load"})});break;case "windowScroll":P(q,"scroll",function(e){d(a,e)},{passive:!0});break;case "scroll":P(a,"scroll",function(e){d(a,e)},{passive:!0});break;case "outside":P(t,"click",function(e){a.contains(e.target)||d(a,e)},{capture:!0});break;case "remove":Ta().observe(a.parentElement,{childList:!0});a.addEventListener(c,function(e){d(a,e)});break;case "empty":case "notempty":case "childrenChange":Ua().observe(a,{childList:!0});
a.addEventListener(c,function(e){d(a,e)});break;case "visible":case "invisible":Va().observe(a);a.addEventListener(c,function(e){d(a,e)});break;case "closeby":case "away":Wa().observe(a);a.addEventListener(c,function(e){d(a,e)});break;default:P(a,c,function(e){d(a,e)})}}function ua(a){q.addEventListener("popstate",ka);q.addEventListener("beforeunload",ja);F(t.body);R=!0;console.debug("init done",a)}var B=q.location,ba=t.currentScript,Aa=parseInt(v("timeout",3E3),10),Ea=parseInt(v("history",20),10),
ma=v("attrs-to-settle","class,style,width,height").split(","),Ka=parseInt(v("settle-delay",20),10),Ha=v("enter-class","ts-enter");v("request-class","ts-request");v("added-class","ts-added");v("swap-class","ts-swapping");v("settling-class","ts-settling");var R=!1,Q=[],I={stop:function(a){a.event&&a.event.stopPropagation()},prevent:function(a){a.event&&a.event.preventDefault()},delay:function(a){return new Promise(function(b){setTimeout(b,ca(a),!0)})},not:function(a){var b=[].slice.call(arguments,1,
arguments.length-1),c=C({},arguments[arguments.length-1]);c.src=c.src.slice(c.command.length+1);b=Z(a,b,c);return null===b||void 0===b?b:!b},target:function(a,b){a=z(b.el,a);if(!a)return!1;b.el=a},remove:D({1:function(a){a.el.remove()},2:function(a,b){z(b.el,a).remove()}}),wait:function(a,b){return new Promise(function(c){b.el.addEventListener(a,c,{once:!0})})},class:function(a,b){b.el.classList.add(a)},"class+":function(a,b){b.el.classList.add(a)},"class-":function(a,b){b.el.classList.remove(a)},
"class^":function(a,b){b.el.classList.toggle(a)},classtoggle:function(a,b){b.el.classList.toggle(a)},text:D({1:function(a){return a.el.innerText=a.input},2:function(a,b){return b.el.innerText=a}}),html:D({1:function(a){return a.el.innerHTML=a.input},2:function(a,b){return b.el.innerHTML=a}}),attr:D({2:function(a,b){return b.el[a]},3:function(a,b,c){return c.el[a]=b}}),log:function(){var a=arguments;var b=a.length;var c=[].slice.call(a,0,b-1);a=a[b-1];a.input&&c.push(a.input);console.log.apply(console,
c)}},N=console.error?console.error.bind(console,"TwinSpark error:"):console.log.bind(console,"TwinSpark error:"),C=Object.assign||function(a,b){if(!b)return a;for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},M=q.requestIdleCallback||function(a){setTimeout(a,100)},Ca=q.indexedDB||q.mozIndexedDB||q.webkitIndexedDB||q.msIndexedDB,T,oa=function(){function a(f,h,g){h=h.getAttribute(g);h!=f.getAttribute(g)&&(h?f.setAttribute(g,h):f.removeAttribute(g))}function b(f,h){if(1!=f.nodeType)f.nodeValue=
h.nodeValue;else{for(var g of h.attributes)a(f,h,g.name);for(g of f.attributes)a(f,h,g.name);"INPUT"==f.tagName&&"file"!=f.type?(f.value=h.value||"",a(f,h,"value"),a(f,h,"checked"),a(f,h,"disabled")):"OPTION"==f.tagName?a(f,h,"selected"):"TEXTAREA"==f.tagName&&(a(f,h,"value"),f.firstChild&&f.firstChild.nodeValue!=h.value&&(f.firstChild.nodeValue=h.value))}}function c(f,h){return f&&h&&f.nodeType==h.nodeType&&f.tagName==h.tagName}function d(f,h){if(1!=h.nodeType)return null;h=w(h,"[id]").map(g=>"#"+
g.id).join(",");if(!h)return null;do if(1==f.nodeType&&y(f,h))return f;while(f=f.nextSibling);return null}function e(f,h){for(;f!==h;){var g=f;f=f.nextSibling;g.remove()}return h}function k(f,h,g){if(!g.ignoreActive||f!=t.activeElement||"INPUT"!=f.tagName&&"TEXTAREA"!=f.tagName){if(h){if(c(f,h)){b(f,h);if(1==f.nodeType&&1==h.nodeType){var m=f.firstChild;for(h=h.firstChild;h;){var n=h;h=n.nextSibling;if(m){var p=d(m,n);if(p)m=e(m,p).nextSibling,k(p,n,g);else{a:{p=n;var r=m,A=p.nextSibling,O=0;do{if((1==
r.nodeType?w(r,"[id]").length:0)+(1==p.nodeType?w(p,"[id]").length:0))break;if(c(r,p)){p=r;break a}if(c(r,A)&&(O++,A=A.nextSibling,2<=O))break}while(r=r.nextSibling);p=null}p?(m=e(m,p).nextSibling,k(p,n,g)):(f.insertBefore(n,m),g.cb("node-added",n))}}else f.appendChild(n),g.cb("node-added",n)}m&&e(m,f.lastChild).remove()}return f}f.replaceWith(h);g.cb("node-added",h);return h}f.remove();return null}return f}function l(f,h,g={}){g.cb||(g.cb=function(){});f&&f.nodeType==Node.DOCUMENT_NODE&&(f=f.documentElement);
h&&h.nodeType==Node.DOCUMENT_NODE&&(h=h.documentElement);return k(f,h,g)}l.syncAttrs=b;return l}(),H={reqs:[],request:null};E("[ts-req]",function(a){function b(c){W([X(a,c,!1)])}a.hasAttribute("ts-trigger")?a.addEventListener("ts-trigger",b):Y(a,b)});E("[ts-req-batch]",function(a){function b(c){c=X(a,c,!0);H.reqs.push(c);H.request||(H.request=setTimeout(Oa,16))}a.hasAttribute("ts-trigger")?a.addEventListener("ts-trigger",b):Y(a,b)});E("[ts-action]",function(a){var b=function(c){c.detail&&c.detail.event&&
(c=c.detail.event);L(z(a),c,a.getAttribute("ts-action"),null)};a.hasAttribute("ts-trigger")?a.addEventListener("ts-trigger",b):"A"==a.tagName||"BUTTON"==a.tagName?Y(a,b):N("No trigger for action on element",a)});var Va=J(function(){return sa({on:"visible",off:"invisible",rootMargin:"0px",threshold:.01})}),Wa=J(function(){return sa({on:"closeby",off:"away",rootMargin:(q.innerHeight/2|0)+"px",threshold:.01})}),Ta=J(function(){return new MutationObserver(function(a){for(var b=0;b<a.length;b++)for(var c=
a[b],d=0;d<c.removedNodes.length;d++)u(c.removedNodes[d],"remove",{record:c})})}),Ua=J(function(){return new MutationObserver(function(a){for(var b=0;b<a.length;b++){var c=a[b];"childList"==c.type&&(u(c.target,c.target.childNodes.count?"notempty":"empty",{record:c}),u(c.target,"childrenChange",{record:c}))}})});E("[ts-trigger]",function(a){var b=a.getAttribute("ts-trigger");b&&aa(b)[0].commands.forEach(function(c){Sa(a,c)})});da(ua);q.performance&&q.performance.navigation&&q.performance.navigation.type==
q.performance.navigation.TYPE_BACK_FORWARD&&ka({state:"initial"});q[va]={onload:da,register:E,activate:F,func:function(a,b){if("object"==typeof a)return C(I,a);b&&(I[a]=b);return I},elcrumbs:fa,arity:D,data:ha,merge:G,target:z,query:z,trigger:u,parseAction:aa,action:L,exec:Z,makeReq:X,executeReqs:W,morph:oa,setERR:a=>N=a,_internal:{DIRECTIVES:Q,FUNCS:I,init:ua}}})(window,document,"twinspark");
