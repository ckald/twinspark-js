(function(t,u,Aa){function I(a,b){return ia&&ia.dataset[a]||b}function J(){var a=[].reduce.call(arguments,(b,c)=>{if(b[c.length])throw y("Arity dispatch: duplicate function with the same number of arguments",{length:c.length,func:c.length,duplicate:b[c.length]});b[c.length]=c;return b},{});return function(){var b=arguments.length,c=a[b];if(!c)throw y("No function supplied accepting "+b+" arguments",{functions:a,arguments:Array.from(arguments)});return c.apply(this,arguments)}}function Ba(a,b){return a.reduce(function(c,
d){var e=b(d);(c[e]||(c[e]=[])).push(d);return c},{})}function Ca(a,b){return a.map((c,d)=>[c,b[d]])}function Da(a){for(var b=new Set,c=[],d,e=0;e<a.length;e++)d=a[e],b.has(d)||(b.add(d),c.push(d));return c}function y(a,b){a=Error(a);a.extra=b;return a}function P(a){var b=null;return function(){return b||(b=a())}}function ja(a){if(a=a&&a.trim())return a.match(/\d+s/)?1E3*parseFloat(a):parseFloat(a)}function ka(a){"loading"==u.readyState?u.addEventListener("DOMContentLoaded",a):a()}function w(a,b,
c,d){d=d&&d.hasOwnProperty("bubbles")?d.bubbles:!0;d=new CustomEvent(b,{bubbles:d,cancelable:!0,detail:c});console.debug("\ud83d\udece\ufe0f EVENT",b,{el:a,detail:c});a.dispatchEvent(d);return d}function B(a,b){return 1==a.nodeType&&a.matches(b)?a:a.querySelector?a.querySelector(b):null}function z(a,b){if(!a.querySelectorAll)return[];var c=Array.from(a.querySelectorAll(b));1==a.nodeType&&a.matches(b)&&c.unshift(a);return c}function la(a){if(a.id)return a.id;var b=a.tagName.toLowerCase();return a.className?
b+"."+a.className.replace(" ","."):b}function ma(a,b){var c=[],d=a;do(a=d.getAttribute(b))&&c.push(a);while(d=d.parentElement);return c}function A(a,b,c){a=a["twinspark-internal"]||(a["twinspark-internal"]={});if(!b)return a;a.hasOwnProperty(b)||"undefined"==typeof c||(a[b]=c);return a[b]}function K(a,b){a={selector:a,handler:b};Q.push(a);X&&z(u.body,a.selector).forEach(a.handler)}function Ea(a){A(a,"event-handlers",[]).forEach(b=>a.removeEventListener(b.type,b.func,b.opts))}function x(a,b,c,d){a.addEventListener(b,
c,d);A(a,"event-handlers",[]).push({type:b,func:c,opts:d});return a}function Fa(a){Ea(a);Q.forEach(b=>a.matches(b.selector)&&b.handler(a))}function L(a){var b=Q.map(c=>c.selector).join(",");z(u.body,b).forEach(Fa);w(a,"ts-ready")}function Ga(a,b){var c=new XMLHttpRequest;return{promise:new Promise(function(d,e){b||(b={});c.open(b.method||"GET",a,!0);for(var h in b.headers)c.setRequestHeader(h,b.headers[h]);c.onreadystatechange=function(){if(4==c.readyState&&0!=c.status){var l={"ts-title":c.getResponseHeader("ts-title"),
"ts-history":c.getResponseHeader("ts-history"),"ts-swap":c.getResponseHeader("ts-swap"),"ts-swap-push":c.getResponseHeader("ts-swap-push")};return d({ok:200<=c.status&&299>=c.status,status:c.status,url:c.responseURL,reqUrl:a,xhr:c,opts:b,headers:l,content:c.responseText})}};c.timeout=Ha;c.ontimeout=function(){return e({ok:!1,status:0,url:a,error:"timeout"})};c.send(b.body)}),xhr:c}}function M(a,b,c){if(!b)return a;var d,e;for([d,e]of b)d&&(!c||null!==e&&""!==e?a.append(d,e):a.delete(d));return a}
function Ia(a,b){return ma(a,b).reduceRight((c,d)=>{if(""==d)var e=null;else if("{"==d[0])if(d=JSON.parse(d),"object"===typeof d&&null!==d){var h=[];for(e in d)h.push([e,d[e]]);e=h}else e=void 0;else e=M(new FormData,new URLSearchParams(d));return M(c,e,!0)},new FormData)}function Y(a){return a.name&&("submit"!=a.type||a.hasAttribute("ts-clicked"))&&("radio"!=a.type&&"checkbox"!=a.type||a.checked)?a.value:null}function na(a,b){var c=Ia(a,"ts-data"),d=a.tagName,e;"FORM"==d?(c=M(c,new FormData(a)),
d=u.activeElement,"submit"==d.type&&d.name&&d.value&&!c.has(d.name)?c.append(d.name,d.value):"submit"==(null==b?void 0:b.type)&&(a=B(a,"[type=submit]"))&&a.name&&a.value&&!c.has(a.name)&&c.append(a.name,a.value)):("INPUT"==d||"SELECT"==d||"TEXTAREA"==d)&&(e=Y(a))&&c.append(a.name,e);return c}function R(a){return new Promise(function(b,c){a.onsuccess=function(){b(a.result)};a.onerror=function(){c(a.error)}})}function oa(){if(Z)return Z;var a=Ja.open("twinspark",1);a.onupgradeneeded=function(){a.result.createObjectStore("twinspark",
{keyPath:"url"}).createIndex("time","time")};return Z=R(a)}function S(a,b){return a.transaction(a.name,b&&b.write&&"readwrite"||"readonly").objectStore(a.name)}async function Ka(a){var b=S(a);b=await R(b.count());console.debug("PAGES IN STORAGE",b);var c=b-La;if(!(0>=c)){b=S(a,{write:!0});var d=b.index("time").openCursor();d.onsuccess=function(e){if(e=d.result)e.delete(),0<--c&&e.continue()}}}async function pa(){var a={url:G.pathname+G.search,html:u.body.innerHTML,time:+new Date},b=await oa(),c=S(b,
{write:!0});await R(c.put(a));await Ka(b)}function Ma(a,b){pa();history.replaceState("history","","");history.pushState(null,b,a);w(t,"ts-pushstate",{url:a})}function Na(a){history.replaceState("history","",a);w(t,"ts-replacestate",{url:a})}async function qa(a){if(a.state){var b=G.pathname+G.search,c=await oa();c=S(c);b=await R(c.get(b));console.debug("onpopstate restore",b.url,b.html.length,b.time);b&&b.html&&(u.body.innerHTML=b.html,("INITIAL"!=a.state||X)&&L(u.body))}}function C(a,b){if(!a)return a;
null==b&&(b=a.getAttribute("ts-target"));return b?b.split("|").map(c=>c.trim()).reduce((c,d,e)=>{e=0<e;if(d&&c&&"target"!=d)if("inherit"==d){var h=c.parentElement.closest("[ts-target]");h=C(h)}else h="parent "==d.slice(0,7)?c.closest(d.slice(7)):"child "==d.slice(0,6)?c.querySelector(d.slice(6)):"sibling "==d.slice(0,8)?c.parentElement.querySelector(d.slice(8)):e?c.querySelector(d):u.querySelector(d);else h=c;if(!h)throw c=c.outerHTML.match(/<.+?>/)[0],y(`Could not find element with selector ${d} for element ${c}`+
(e?" among children":""),{element:c,selector:d});return h},a):a}function D(a,b,c,d){var e=b.getAttribute(c);e!=a.getAttribute(c)&&(d&&(a[c]=b[c]||""),e?a.setAttribute(c,e):a.removeAttribute(c))}function ra(a,b){for(var c of Oa)D(a,b,c)}function sa(a){a.classList.add(ta);setTimeout(()=>a.classList.remove(ta))}function Pa(a,b,c){if(a.id){b=b.querySelector(a.tagName+"[id='"+a.id+"']");if(!b)return sa(a);var d=a.cloneNode();ra(a,b);c.tasks.push(function(){ra(a,d)});return c}}function aa(a,b,c,d){a||(a=
"replace");"morph"!=a&&"morph-all"!=a&&"skip"!=a&&z(c,"[id]").forEach(function(e){Pa(e,b,d)});switch(a){case "morph-all":c=ba(b,c,{ignoreActive:!1});break;case "morph":c=ba(b,c,{ignoreActive:!0});break;case "replace":b.replaceWith(c);break;case "inner":b.replaceChildren(c);break;case "prepend":b.prepend(c);break;case "append":b.append(c);break;case "beforebegin":b.parentNode.insertBefore(c,b);break;case "afterend":b.parentNode.insertBefore(c,b.nextSibling);break;case "skip":break;default:throw Error("Unknown swap strategy "+
a);}return c}function ua(a,b,c){var d=C(a);if(!d)throw y(`Target element not found for origin ${a.outerHTML.match(/<.+?>/)[0]}`,{origin:a,replyParent:b});var e;if(e=a.getAttribute("ts-req-selector"))if("children "==e.slice(0,9)){e=B(b,e.slice(9));var h=new DocumentFragment;e&&e.children&&h.append.apply(h,e.children);e=h}else e=B(b,e);else e="BODY"==b.tagName&&"BODY"!=d.tagName?b.children[0]:b;if(!e)throw c=a.getAttribute("ts-req-selector"),y("Cannot find specified html in response, "+`maybe nothing to select as ${c}`,
{sel:c,replyParent:b,origin:a});b=a.getAttribute("ts-swap");if(a){h={response:c.response};var l=w(a,"ts-req-after",h);T(a,l,a.getAttribute("ts-req-after"),h)}return aa(b,d,e,c)}function Qa(a,b,c){var d={response:c,tasks:[]},e,h;"skip"!=c.headers["ts-swap"]&&(e=1==a.length?[ua(a[0],b,d)]:Ca(a,b.children).map(([l,p])=>ua(l,p,d)));a=z(b,"[ts-swap-push]").map(l=>{try{var p=l.getAttribute("ts-swap-push");!p&&l.id&&(p="#"+l.id);var q=B(u.body,p);if(!q)throw y("cannot find target for server-pushed swap",
{reply:l});var k=l.getAttribute("ts-swap");return aa(k,q,l,d)}catch(n){console.error(n)}});c.headers["ts-swap-push"]&&(h=c.headers["ts-swap-push"].split(",").map(l=>{try{var p=l.match(/(\w+):(.+)<=(.+)/);if(!p)throw y("Cannot parse ts-swap-push header value",{header:l});var q=p[1],k=B(u.body,p[2]);if(!k)throw y("cannot find target for header swap",{sel:p[2]});var n=B(b,p[3]);if(!n)throw y("cannot find target for header swap",{reply:n,sel:p[3]});return aa(q,k,n,d)}catch(f){console.error(f)}}));e=e.concat(a).concat(h).filter(l=>
l);e=Da(e);e.forEach(function(l){for(var p=l.querySelectorAll("script"),q=0;q<p.length;q++){var k=p[q];if(!(k.type&&"text/javascript"!=k.type||k.dataset.tsNoload)){for(var n=k.parentNode,f=u.createElement(k.nodeName),g=0;g<k.attributes.length;g++){var m=k.attributes[g].name,r=k.getAttribute(m);f.setAttribute(m,r)}f.appendChild(u.createTextNode(k.innerHTML));n.replaceChild(f,k)}}L(l);(l=B(l,"[autofocus]"))&&l.focus()});setTimeout(function(){d.tasks.forEach(function(l){l()})},16);return e}function va(a,
b,c,d){var e=(new DOMParser).parseFromString(c,"text/html");e.body.querySelectorAll("noscript").forEach(h=>h.remove());c=d.headers["ts-title"]||e.title;e=e.body;if(e.children.length<b.length)throw`This request needs at least ${b.length} elements, `+`but ${e.children.length} were returned`;(a=d.headers["ts-history"]||b[0].hasAttribute("ts-req-history")&&a)&&("replace"==b[0].getAttribute("ts-req-history")?Na(a):Ma(a,c));return Qa(b,e,d)}function Ra(a){let b,c;var d=na(a.el,null!=(c=null==(b=a.event.detail)?
void 0:b.event)?c:a.event);return{method:a.method,data:d,headers:{Accept:"text/html+partial","TS-URL":G.pathname+G.search,"TS-Origin":la(a.el),"TS-Target":la(C(a.el))}}}function Sa(a,b){if(!b)return a;if(!Array.from(b.entries).every(c=>"string"===typeof c))return a.body=b,a;b=new URLSearchParams(b);a.body=b.toString();a.headers["Content-Type"]="application/x-www-form-urlencoded";return a}function Ta(a){if(a.length){var b=a[0].url,c=a[0].method,d=a.reduce(function(k,n){return M(k,n.opts.data)},new FormData),
e="GET"==c?(new URLSearchParams(d)).toString():null;d="GET"!=c?d:null;var h={method:c,headers:a.reduce(function(k,n){n=n.opts.headers;for(var f in n)k[f]?k[f]!=n[f]&&(k[f]+=", "+n[f]):k[f]=n[f];return k},{})};h=Sa(h,d);var l=b;e&&(l+=-1==b.indexOf("?")?"?":"&",l+=e);var p=a.map(function(k){return k.el}),q=Ga(l,h);p.forEach(function(k){k.setAttribute("aria-busy","true");k.classList.add(Ua);A(k)["active-xhr"]=q.xhr});return q.promise.then(function(k){U(()=>p.forEach(n=>{n.removeAttribute("aria-busy");
n.classList.remove("ts-active");delete A(n)["active-xhr"]}));if(q.xhr.isAborted)return!1;if(k.ok)return k.url&&k.url!=(new URL(l,G.href)).href?(k.headers["ts-history"]||(k.headers["ts-history"]=k.url),va(k.url,[u.body],k.content,k)):va(b,p,k.content,k);V("Something wrong with response",k.content);p.forEach(function(n){w(n,"ts-req-error",H({error:"ts-req-error"},{response:k,url:l,opts:h}))})}).catch(function(k){U(()=>p.forEach(n=>{n.removeAttribute("aria-busy");n.classList.remove("ts-active");delete A(n)["active-xhr"]}));
V("Error retrieving backend response",l,k.error||k);p.forEach(function(n){w(n,"ts-req-error",H({error:"ts-req-error"},{response:k,url:l,opts:h}))})})}}function ca(a){return Promise.all(a.map(function(b){b.opts=Ra(b);var c={req:b},d=w(b.el,"ts-req-before",c);if(d.defaultPrevented)return null;var e=b;(c=T(b.el,d,b.el.getAttribute("ts-req-before"),c))&&(e=c.then(function(l){return d.defaultPrevented?null:b}));c=b.el.getAttribute("ts-req-strategy")||"queue";var h=A(b.el)["active-xhr"];if("first"===c&&
h)return null;"last"===c&&h&&(h.abort(),delete A(b.el)["active-xhr"]);return e})).then(function(b){return b.filter(function(c){return!!c})}).then(Ta)}function Va(){var a=Ba(N.reqs,c=>c.method+c.url);N={reqs:[],request:null};for(var b in a)ca(a[b])}function da(a,b,c){var d=(c?a.getAttribute("ts-req-batch"):a.getAttribute("ts-req"))||("FORM"==a.tagName?a.getAttribute("action"):a.getAttribute("href")),e=(a.getAttribute("ts-req-method")||("FORM"==a.tagName?a.getAttribute("method")||"POST":"GET")).toUpperCase();
return{el:a,opts:{},event:b,url:d,method:e,batch:c}}function Wa(a){x(a,"click",function(b){b.target.focus();a.setAttribute("ts-clicked","1");U(function(){a.removeAttribute("ts-clicked")})})}function ea(a,b){var c=a.tagName,d="click";if("FORM"==c)d="submit";else if("INPUT"==c||"SELECT"==c||"TEXTAREA"==c)d="change";"FORM"==c&&"submit"==d&&z(a,'button, input[type="submit"]').forEach(Wa);return x(a,d,function(e){e.altKey||e.ctrlKey||e.shiftKey||e.metaKey||0!=(e.button||0)||(e.preventDefault(),e.stopPropagation(),
b(e))})}function fa(a,b,c){a=t._ts_func&&t._ts_func[a]||O[a]||t[a];if(!a)throw Error("Unknown action command: "+c.src);return a.apply(c.el,b.concat([c]))}function ha(a){function b(){var m=p.trim();if(m.length){var r=l,E=r.push;var v=m[0];m='"'==v||"'"==v?m.slice(1,m.length-1):m;E.call(r,m)}p=""}function c(){l.length&&(h.push({src:a.slice(q,n).trim(),name:l[0],args:l.slice(1)}),l=[],q=n+1)}function d(){h.length&&(e.push({src:a.slice(k,n).trim(),commands:h}),h=[],k=n+1)}var e=[],h=[],l=[],p="",q=0,
k=0,n=0,f=null;for(n=0;n<a.length;n++){var g=a[n];if(f)"\\"==g?(n++,p+=a[n]):g==f?(p+=g,f=null):p+=g;else{if("'"==g||'"'==g)f=g;else if(" "==g){b();continue}else if(","==g){b();c();continue}else if(";"==g){b();c();d();continue}p+=g}}b();c();d();return e}function Xa(a,b){console.debug("ACTION",a.src,b);var c=H({line:a.src},b);return a.commands.reduce(function(d,e){return d.then(function(h){console.debug(!1!==h?"\ud83d\udd35":"\ud83d\udeab","COMMAND",e.src,{input:h,src:a.src});if(!1===h)return h;void 0!==
h&&(c.input=h);c.command=e.name;c.src=e.src;return fa(e.name,e.args,c)}).catch(function(h){throw H(h,{extra:{command:e.src,action:a.src,element:c.el.outerHTML.match(/<.+?>/)[0]}});})},Promise.resolve(null))}function T(a,b,c,d){if(c){console.debug("ACTIONS",{spec:c,event:b,payload:d});c=ha(c);a=H({el:a,event:b},d);var e;for(b=0;b<c.length;b++)d=c[b],d.commands.length&&(e=Xa(d,a));return e}}function wa(a){var b=a.on,c=a.off,d=a.threshold;return new IntersectionObserver(function(e,h){for(h=0;h<e.length;h++){var l=
e[h];l.intersectionRatio>d?w(l.target,b,{entry:l}):l.intersectionRatio<d&&w(l.target,c,{entry:l})}},a)}function Ya(a){var b=a.args.indexOf("delay"),c=-1!=a.args.indexOf("changed"),d=-1!=a.args.indexOf("once"),e=-1!=b?ja(a.args[b+1]):null;return function(h,l){function p(){w(h,"ts-trigger",{event:l},{bubbles:!1})}var q=A(h,"trigger",{});if(d){if(q.once)return;q.once=!0}if(c){if(q.value==Y(h))return;q.value=Y(h)}e?(q.delay&&clearTimeout(q.delay),q.delay=setTimeout(p,e)):p()}}function W(a,b,c,d){function e(h){c(h);
A(a,"trigger",{}).once&&a.removeEventListener(b,e,d)}x(a,b,e,d)}function Za(a,b){var c=b.name,d=Ya(b);switch(c){case "load":U(function(){d(a,{type:"load"})});break;case "windowScroll":W(t,"scroll",function(e){d(a,e)},{passive:!0});break;case "scroll":W(a,"scroll",function(e){d(a,e)},{passive:!0});break;case "outside":W(u,"click",function(e){a.contains(e.target)||d(a,e)},{capture:!0});break;case "remove":$a().observe(a.parentElement,{childList:!0});x(a,c,function(e){d(a,e)});break;case "empty":case "notempty":case "childrenChange":ab().observe(a,
{childList:!0});x(a,c,function(e){d(a,e)});break;case "visible":case "invisible":bb().observe(a);x(a,c,function(e){d(a,e)});break;case "closeby":case "away":cb().observe(a);x(a,c,function(e){d(a,e)});break;default:W(a,c,function(e){d(a,e)})}}function xa(a){t.addEventListener("popstate",qa);t.addEventListener("beforeunload",pa);L(u.body);X=!0;console.debug("init done",a)}var G=t.location,ia=u.currentScript,Ha=parseInt(I("timeout",3E3),10),La=parseInt(I("history",20),10),Oa=I("settle","class,style,width,height").split(","),
ta=I("insert-class","ts-insert"),db=I("remove-class","ts-remove"),Ua=I("active-class","ts-active"),X=!1,Q=[],O={stop:function(a){a.event&&a.event.stopPropagation()},prevent:function(a){a.event&&a.event.preventDefault()},delay:function(a){return new Promise(function(b){setTimeout(b,ja(a),!0)})},not:function(a){var b=[].slice.call(arguments,1,arguments.length-1),c=H({},arguments[arguments.length-1]);c.src=c.src.slice(c.command.length+1);b=fa(a,b,c);return null===b||void 0===b?b:!b},target:function(a,
b){a=C(b.el,a);if(!a)return!1;b.el=a},remove:J(function(a){a.el.remove()},function(a,b){C(b.el,a).remove()}),wait:function(a,b){return new Promise(function(c){x(b.el,a,c,{once:!0})})},class:function(a,b){b.el.classList.add(a)},"class+":function(a,b){b.el.classList.add(a)},"class-":function(a,b){b.el.classList.remove(a)},"class^":function(a,b){b.el.classList.toggle(a)},classtoggle:function(a,b){b.el.classList.toggle(a)},text:J(function(a){return a.el.innerText=a.input},function(a,b){return b.el.innerText=
a}),html:J(function(a){return a.el.innerHTML=a.input},function(a,b){return b.el.innerHTML=a}),attr:J(function(a,b){let c=b.el[a];return"undefined"!=typeof c?c:b.el.getAttribute(a)},function(a,b,c){c.el[a]=b;c.el.setAttribute(a,b);return b}),log:function(){var a=arguments;var b=a.length;var c=[].slice.call(a,0,b-1);a=a[b-1];a.input&&c.push(a.input);console.log.apply(console,c)}},V=console.error?console.error.bind(console,"TwinSpark error:"):console.log.bind(console,"TwinSpark error:"),H=Object.assign||
function(a,b){if(!b)return a;for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},U=t.requestIdleCallback||function(a){setTimeout(a,100)},Ja=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB,Z,ba=function(){function a(f,g){g.cb("node-remove",f);if(1!=f.nodeType)f.remove();else{f.classList.add(db);g=f.getAnimations().filter(m=>m instanceof t.CSSTransition);if(!g.length)return f.remove();Promise.all(g.map(m=>m.finished)).then(()=>{f.remove()})}}function b(f,g){g.cb("node-insert",f);
f instanceof HTMLElement&&(L(f),sa(f))}function c(f,g){if(1!=f.nodeType)f.nodeValue=g.nodeValue;else{for(var m of g.attributes)D(f,g,m.name);for(m of f.attributes)D(f,g,m.name);"INPUT"==f.tagName&&"file"!=f.type?(D(f,g,"value",!0),D(f,g,"checked",!0),D(f,g,"disabled",!0)):"OPTION"==f.tagName?D(f,g,"selected"):"TEXTAREA"==f.tagName&&(D(f,g,"value"),f.firstChild&&f.firstChild.nodeValue!=g.value&&(f.firstChild.nodeValue=g.value))}}function d(f,g){const m=new Set;for(const r of g)f.has(r)&&m.add(r);return m}
function e(f,g){return f&&g&&f.nodeType==g.nodeType&&f.tagName==g.tagName}function h(f,g){if(1!=g.nodeType)return null;g=z(g,"[id]").map(m=>"#"+m.id).join(",");if(!g)return null;do if(B(f,g))return f;while(f=f.nextElementSibling);return null}function l(f,g,m){var r=g.nextSibling,E=0;do{var v=z(f,"[id]").map(F=>F.id);if(v.length&&d(m,v).size)break;if(!v.length&&!z(g,"[id]").length&&e(f,g))return f;if(e(f,r)&&(E++,r=r.nextSibling,2<=E))break}while(f=f.nextSibling);return null}function p(f,g,m){for(;f!==
g;){var r=f;f=f.nextSibling;a(r,m)}return g}function q(f,g,m){if(!m.ignoreActive||f!=u.activeElement||"INPUT"!=f.tagName&&"TEXTAREA"!=f.tagName){if(g){if(e(f,g))return c(f,g),1==f.nodeType&&1==g.nodeType&&k(f,g,m),f;f.parentElement?(f.parentElement.insertBefore(g,f.nextSibling),a(f,m),b(g,m)):f.replaceWith(g);return g}a(f,m);return null}return f}function k(f,g,m){var r=f.firstChild,E=g.firstChild;for(g=new Set(z(g,"[id]").map(eb=>eb.id));E;){var v=E;E=v.nextSibling;if(r){var F=h(r,v);F?(r=p(r,F,m).nextSibling,
q(F,v,m)):(F=l(r,v,g))?(r=p(r,F,m).nextSibling,q(F,v,m)):(f.insertBefore(v,r),b(v,m))}else f.appendChild(v),b(v,m)}r&&(r=p(r,f.lastChild,m),a(r,m))}function n(f,g,m={}){m.cb||(m.cb=function(){});f&&f.nodeType==Node.DOCUMENT_NODE&&(f=f.documentElement);g&&g.nodeType==Node.DOCUMENT_NODE&&(g=g.documentElement);return q(f,g,m)}n.syncAttrs=c;return n}(),N={reqs:[],request:null};K("[ts-req]",function(a){function b(c){ca([da(a,c,!1)])}a.hasAttribute("ts-trigger")?x(a,"ts-trigger",b):ea(a,b)});K("[ts-req-batch]",
function(a){function b(c){c=da(a,c,!0);N.reqs.push(c);N.request||(N.request=setTimeout(Va,16))}a.hasAttribute("ts-trigger")?x(a,"ts-trigger",b):ea(a,b)});K("[ts-action]",function(a){var b=function(c){c.detail&&c.detail.event&&(c=c.detail.event);T(C(a),c,a.getAttribute("ts-action"),null)};a.hasAttribute("ts-trigger")?x(a,"ts-trigger",b):"A"==a.tagName||"BUTTON"==a.tagName?ea(a,b):V("No trigger for action on element",a)});var bb=P(function(){return wa({on:"visible",off:"invisible",rootMargin:"0px",
threshold:.01})}),cb=P(function(){return wa({on:"closeby",off:"away",rootMargin:(t.innerHeight/2|0)+"px",threshold:.01})}),$a=P(function(){return new MutationObserver(function(a){for(var b=0;b<a.length;b++)for(var c=a[b],d=0;d<c.removedNodes.length;d++)w(c.removedNodes[d],"remove",{record:c})})}),ab=P(function(){return new MutationObserver(function(a){for(var b=0;b<a.length;b++){var c=a[b];"childList"==c.type&&(w(c.target,c.target.childNodes.count?"notempty":"empty",{record:c}),w(c.target,"childrenChange",
{record:c}))}})});K("[ts-trigger]",function(a){var b=a.getAttribute("ts-trigger");b&&ha(b)[0].commands.forEach(function(c){Za(a,c)})});ka(xa);let ya,za;(null==(ya=t.performance)?void 0:null==(za=ya.navigation)?void 0:za.type)==t.performance.navigation.TYPE_BACK_FORWARD&&qa({state:"INITIAL"});t[Aa]={onload:ka,register:K,activate:L,func:function(a,b){if("object"==typeof a)return H(O,a);b&&(O[a]=b);return O},elcrumbs:ma,arity:J,data:na,merge:M,target:C,query:C,trigger:w,parseAction:ha,action:T,exec:fa,
makeReq:da,executeReqs:ca,morph:ba,setERR:a=>V=a,_internal:{DIRECTIVES:Q,FUNCS:O,init:xa}}})(window,document,"twinspark");
